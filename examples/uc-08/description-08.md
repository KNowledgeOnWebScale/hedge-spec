# Use Case Description

Access by physician as data controller to specific subset of data with a known URI to be refined (e.g. historical weight measurements recorded by HCP) for secondary use (e.g. analyze the weight outcomes of his/her own patient population from first encounter until 1 year after surgery), without time limitation. Data subset defined from the patient's policy side.

For that:
- The patient has a [policy](policy-08.ttl) that allows a subset of her health data to be read for secondary use after being pseudonymised.
- The physician issues a [request](request-08.ttl) to read a subset of pseudonymised health data for secondary use with consent as legal basis.

TODO: SOTW & The expected agreement , i.e., generated by matching policy and request, should also be part of this benchmark.

## Use Case Requirements:

- N/A - non applicable requirements
- TODO - we still need to think about how to integrate that into an ODRL policy
- TODO-EHDS - required to assess whether EHDS is applicable, still needs to be incorporated 

### Subject/holder policy

- Data subject: <https://example.org/patient>
- Data/Personal data: <https://example.org/weight>
- Processing operation: `odrl:read`
- Purpose: `dpv:ScientificResearch` or `dpv:ImproveHealthcare` or `sector-health:ResearchDevelopment` or `ehds:HealthcareScientificResearch` or `ehds:ProvideHealthcareOfficialStatistics` or `ehds:PublicInterestRelatedToHealth` or `ehds:EnsureQualitySafetyHealthcare` or `ehds:ProtectAgainstCrossBorderThreatsToHealth` or `ehds:PublicHealthSurveillance` 
- Pseudo/Anonymisation as a duty: `dpv:Pseudonymisation` (`dpv:DeterministicPseudonymisation` or `dpv:MonotonicCounterPseudonymisation`)
- Recipient: N/A
- Duration: N/A
- Frequency: N/A
- Retrospective/prospective data: Retrospective & prospective limited to 1 year after surgery -- TODO

### Request

- Data controller: <https://example.org/physician>
- Data subject (type): <https://example.org/patient>
- Data/Personal data: <https://example.org/weight>
- Personal electronic health data: TODO-EHDS
- Non-personal electronic health data: TODO-EHDS
- Processing operation: : `odrl:read`
- Purpose: `dpv:ScientificResearch` or `dpv:ImproveHealthcare` or `sector-health:ResearchDevelopment` or `ehds:HealthcareScientificResearch` or `ehds:ProvideHealthcareOfficialStatistics` or `ehds:PublicInterestRelatedToHealth` or `ehds:EnsureQualitySafetyHealthcare` or `ehds:ProtectAgainstCrossBorderThreatsToHealth` or `ehds:PublicHealthSurveillance` 
- Primary/Secondary use: Secondary -- still needs to be expressed in the policy though
- Legal basis: `eu-gdpr:A9-2-a`
- Pseudo/Anonymisation as a duty: `dpv:Pseudonymisation` (`dpv:DeterministicPseudonymisation` or `dpv:MonotonicCounterPseudonymisation`)
- Recipient: N/A
- Data source: N/A #Could be the patient or could be the EHR
- Duration: N/A
- Frequency: N/A
- Events/Activities: N/A

## Open Issues

1. "From the first encounter until 1 year after surgery": retrospective and limited prospective data. Should the surgery be represented as event or activity?
- Current approach, ProperInterval:
```
odrl:target [
            odrl:source ex:weight ; 
            odrl:refinement [
                odrl:leftOperand dpv:DataSource ;
                odrl:operator odrl:eq ;
                odrl:rightOperand ehds:HealthcareProvider ], [
                odrl:leftOperand odrl:dateTime ;
                odrl:operator odrl:isIn ;
                odrl:rightOperand [
                    a time:ProperInterval ;
                    time:hasBeginning ex:FirstEncounterEvent ;
                    time:hasEnd [
                        a time:ProperInterval ;
                        time:intervalAfter ex:SurgeryEvent ;
                        time:hasDurationDescription [
                            a time:DurationDescription ;
                            time:years "1"^^xsd:integer ] ] ] ] ]; # 1 year after surgery, time window activated when surgery date is recorded

# Abstract event definitions, in a third file "events-04.ttl" (to be instantiated with concrete dates)
ex:FirstEncounterEvent a time:Instant, odrl:Event ;
    rdfs:comment "The first patient-physician encounter".

ex:SurgeryEvent a time:Instant, odrl:Event ;
    rdfs:comment "The surgical procedure (may be in future)".
```

- Explicit time points:
```
odrl:target [
            odrl:source ex:weight ; 
            odrl:refinement [
                odrl:leftOperand dpv:DataSource ;
                odrl:operator odrl:eq ;
                odrl:rightOperand ehds:HealthcareProvider ], [
                odrl:leftOperand odrl:dateTime ;
                odrl:operator odrl:gteq ;
                odrl:rightOperand ex:Patient123_FirstEncounter ],[
                odrl:leftOperand odrl:dateTime ;
                odrl:operator odrl:lteq ;
                odrl:rightOperand ex:Patient123_PostSurgeryYear ] ]

#...

### Concrete event instances (would be generated by your system when creating the policy)
ex:Patient123_FirstEncounter a time:Instant, ex:FirstEncounterEvent ;
    time:inXSDDateTimeStamp "2024-01-15T09:00:00Z"^^xsd:dateTime .

ex:Patient123_Surgery a time:Instant, ex:SurgeryEvent ;
    time:inXSDDateTimeStamp "2024-06-20T12:00:00Z"^^xsd:dateTime .

ex:Patient123_PostSurgeryYear a time:Instant, ex:OneYearPostSurgery ;
    time:inXSDDateTimeStamp "2025-06-20T12:00:00Z"^^xsd:dateTime .
```

- Not valid turtle: '?encounterDate'
```
odrl:Event ; # Anchor to surgery event
                odrl:operator odrl:isA ;
                odrl:rightOperand [
                    a time:ProperInterval ;
                    time:hasBeginning [
                        a time:Instant ;
                        time:inXSDDateTimeStamp ?encounterDate ;
                        odrl:Event ex:FirstEncounterEvent
                    ] ;
                    time:hasEnd [
                        a time:Instant ;
                        time:inXSDDateTimeStamp ?surgeryEndDate ;
                        odrl:Event [
                            a ex:SurgeryEvent ;
                            time:hasDuration "P1Y"^^xsd:duration  # 1 year after surgery
                        ] ] ] ] ];
```
- time:IntervalAfter
```
odrl:target [
            odrl:source ex:weight ; 
            odrl:refinement [
                odrl:leftOperand dpv:DataSource ;
                odrl:operator odrl:eq ;
                odrl:rightOperand ehds:HealthcareProvider ], [
                odrl:leftOperand odrl:dateTime ; 
                odrl:operator odrl:isIn ;
                odrl:rightOperand ex:FirstEncounterEvent ], [
                odrl:leftOperand odrl:dateTime ; 
                odrl:operator odrl:lteq ;
                odrl:rightOperand [
                    a time:Instant ;
                    time:intervalAfter ex:SurgeryEvent ;
                    time:hasDuration "P1Y"^^xsd:duration  # 1 year after surgery, time window activated when surgery date is recorded
                    ] ]
#+ declaring events-04.ttl
```

2. Pseudonymisation approach:

    a. Followed strategy: Duty 
        ```
        odrl:permission [
            odrl:duty [
                odrl:action [
                    rdf:value dpv:Pseudonymise ;
                    odrl:refinement [
                        odrl:leftOperand dpv:hasPseudonymisationTechnique ;
                        odrl:operator odrl:isAnyOf ;
                        odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ] ] ] ]
        ```

    _@besteves4 comment:_

        No need to specify the type of Pseudo/Anonymisation.

        Does the assignee of the duty of pseudo/anonymisation need to be explicitly stated in the policy?

        _#JelleCousyns comment:_

            No need to mention, as it depends on the case, it could be the user, the doctor or the technology provider (one of the Data Controllers). 

        _@henarmartinsantos comment:_

            Maybe the duty assignee could be included as a Dynamic value: 
            
            ```
            XXX a odrl3proposal:OperandReference ;
                odrl3proposal:reference ex:externalSource ;
                odrl3proposal:path ex:PseudomisingDutyAssignee ;
            ```

            To be specified when known in the SotW

    b. Alternatives:
            
        # 1. Data constraint:

        ```
        odrl:constraint [
            odrl:leftOperand dpv:Data ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]
        ```

        # 2. Refinement on `ex:weight`
        ```odrl:target [
            odrl:source ex:weight ;
            odrl:refinement [
                odrl:leftOperand dpv:Data ;
                odrl:operator odrl:isAnyOf ;
                odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]] ;```

        # 3. 
        `odrl:action dpv-odrl:Pseudonymise / dpv-odrl:Anonymise`

        # 4. 
        `ehds:DataRequest` # Seeks access to statistically anonymised ehd

        # 5. processing constraint with DeterministicPseudonymisation (same input always produces the same pseudonym) & MonotonicCounterPseudonymisation (Monotonically increasing counter (P1, P2...)).

        ```
        drl:constraint [
            odrl:leftOperand dpv-odrl:Processing ;
            odrl:operator odrl:isA ;
            odrl:rightOperand dpv:Pseudonymisation ],[
            odrl:leftOperand dpv:hasPseudonymisationTechnique ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ]
        ```

## Closed Issues

1. If the physician is only accessing to his own patients' data and he doesn't share them, could it not be anonymised? Is it enough to be pseudonymised?

    _@JelleCousyns (AContrario Law) comment:_

        In this scenario, the Belgian legislation (art. 199 of the Belgian data protection act) requires anonymization or pseudonymization; so both options are legally valid. 
    
    _@besteves4 comment:_

        No need to specify the type of Pseudo/Anonymisation.