# Use Case Description

Access by physician as data controller to specific subset of data (e.g. historical weight measurements recorded by HCP) for secondary use (e.g. analyze the weight outcomes of his/her own patient population from first encounter until 1 year after surgery), without time limitation. Using a SPARQL query. Data subset defined from the patient's policy side.

For that:
- The patient has a [policy](policy-09.ttl) that allows a subset of her health data to be read for secondary use after being pseudonymised.
- The physician issues a [request](request-09.ttl) to read a subset of pseudonymised health data for secondary use with consent as legal basis.

TODO: SOTW & The expected agreement , i.e., generated by matching policy and request, should also be part of this benchmark.

## Use Case Requirements:

- N/A - non applicable requirements
- TODO - we still need to think about how to integrate that into an ODRL policy
- TODO-EHDS - required to assess whether EHDS is applicable, still needs to be incorporated 

### Subject/holder policy

- Data subject: <https://example.org/patient>
- Data/Personal data: <https://example.org/weight>
- Processing operation: `odrl:read`
- Purpose: `dpv:ScientificResearch` or `dpv:ImproveHealthcare` or `sector-health:ResearchDevelopment` or `ehds:HealthcareScientificResearch` or `ehds:ProvideHealthcareOfficialStatistics` or `ehds:PublicInterestRelatedToHealth` or `ehds:EnsureQualitySafetyHealthcare` or `ehds:ProtectAgainstCrossBorderThreatsToHealth` or `ehds:PublicHealthSurveillance` 
- Pseudo/Anonymisation as a duty: `dpv:Pseudonymisation` (`dpv:DeterministicPseudonymisation` or `dpv:MonotonicCounterPseudonymisation`)
- Recipient: N/A
- Duration: N/A
- Frequency: N/A
- Retrospective/prospective data: Retrospective & prospective limited to 1 year after surgery -- TODO

### Request

- Data controller: <https://example.org/physician>
- Data subject (type): <https://example.org/patient>
- Data/Personal data: <https://example.org/weight>
- Personal electronic health data: TODO-EHDS
- Non-personal electronic health data: TODO-EHDS
- Processing operation: : `odrl:read`
- Purpose: `dpv:ScientificResearch` or `dpv:ImproveHealthcare` or `sector-health:ResearchDevelopment` or `ehds:HealthcareScientificResearch` or `ehds:ProvideHealthcareOfficialStatistics` or `ehds:PublicInterestRelatedToHealth` or `ehds:EnsureQualitySafetyHealthcare` or `ehds:ProtectAgainstCrossBorderThreatsToHealth` or `ehds:PublicHealthSurveillance` 
- Primary/Secondary use: Secondary -- still needs to be expressed in the policy though
- Legal basis: `eu-gdpr:A9-2-a`
- Pseudo/Anonymisation as a duty: `dpv:Pseudonymisation` (`dpv:DeterministicPseudonymisation` or `dpv:MonotonicCounterPseudonymisation`)
- Recipient: N/A
- Data source: N/A #Could be the patient or could be the EHR
- Duration: N/A
- Frequency: N/A
- Events/Activities: N/A

## Open Issues

1. "From the first encounter until 1 year after surgery": retrospective and limited prospective data. Should the surgery be represented as event or activity?

SPARQL:
```
odrl:permission [
        odrl:action odrl:read ;
        odrl:target [
            a odrl:Asset ;
            dcterms:description "SPARQL query to fetch patient weight data"@en;
            rdf:value """
                PREFIX ex: <https://example.org/ns#>
                SELECT ?date ?weight ?measurer
                WHERE {
                    GRAPH ex:health-data {
                        ex:patient ex:weight ?weight ;
                                ex:measurementDate ?date ;
                                ex:measuredBy ?measurer .
                        ?measurer a ehds:HealthcareProvider .
                    }
                }
                ORDER BY ?date
                """ ;
            ] ; 
    ]
```

2. Pseudonymisation approach:

    a. Followed strategy: Duty 
        ```
        odrl:permission [
            odrl:duty [
                odrl:action [
                    rdf:value dpv:Pseudonymise ;
                    odrl:refinement [
                        odrl:leftOperand dpv:hasPseudonymisationTechnique ;
                        odrl:operator odrl:isAnyOf ;
                        odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ] ] ] ]
        ```

    _@besteves4 comment:_

        No need to specify the type of Pseudo/Anonymisation.

        Does the assignee of the duty of pseudo/anonymisation need to be explicitly stated in the policy?

        _#JelleCousyns comment:_

            No need to mention, as it depends on the case, it could be the user, the doctor or the technology provider (one of the Data Controllers). 

        _@henarmartinsantos comment:_

            Maybe the duty assignee could be included as a Dynamic value: 
            
            ```
            XXX a odrl3proposal:OperandReference ;
                odrl3proposal:reference ex:externalSource ;
                odrl3proposal:path ex:PseudomisingDutyAssignee ;
            ```

            To be specified when known in the SotW
            
    b. Alternatives:
            
        # 1. Data constraint:

        ```
        odrl:constraint [
            odrl:leftOperand dpv:Data ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]
        ```

        # 2. Refinement on `ex:weight`
        ```odrl:target [
            odrl:source ex:weight ;
            odrl:refinement [
                odrl:leftOperand dpv:Data ;
                odrl:operator odrl:isAnyOf ;
                odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]] ;```

        # 3. 
        `odrl:action dpv-odrl:Pseudonymise / dpv-odrl:Anonymise`

        # 4. 
        `ehds:DataRequest` # Seeks access to statistically anonymised ehd

        # 5. processing constraint with DeterministicPseudonymisation (same input always produces the same pseudonym) & MonotonicCounterPseudonymisation (Monotonically increasing counter (P1, P2...)).

        ```
        drl:constraint [
            odrl:leftOperand dpv-odrl:Processing ;
            odrl:operator odrl:isA ;
            odrl:rightOperand dpv:Pseudonymisation ],[
            odrl:leftOperand dpv:hasPseudonymisationTechnique ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ]
        ```

# Closed Issues:

1. If the physician is only accessing to his own patients' data and he doesn't share them, could it not be anonymised? Is it enough to be pseudonymised?

    _@JelleCousyns (AContrario Law) comment:_

        In this scenario, the Belgian legislation (art. 199 of the Belgian data protection act) requires anonymization or pseudonymization; so both options are legally valid. 
    
    _@besteves4 comment:_

        No need to specify the type of Pseudo/Anonymisation.
