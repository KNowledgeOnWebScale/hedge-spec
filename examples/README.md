# Use Cases Description and related policies & requests

## Overview of use cases

| Use Case         | Description | Policy | Policy ID | Request | Request ID |
|------------------|-------------|--------|-----------|---------|------------|
| UC-01 | [Description-01](./uc-01/description-01.md) | [Policy-01](./uc-01/policy-01.ttl) | `ex:uc01-p-ehr-primarycare-physicianDC-read` | [Request-01](./uc-01/request-01.ttl) | `ex:uc01-r-ehr-primarycare-physicianDC-read-physician` |
| UC-02-URI | [Description-02-URI](./uc-02/uc-02-URI/description-02-URI.md) | [Policy-02-URI](./uc-02/uc-02-URI/policy-02-URI.ttl) | `ex:uc02-URI-p-weight-primarycare-physicianDC-read` | [Request-02-URI](./uc-02/uc-02-URI/request-02-URI.ttl) | `ex:uc02-URI-r-weight-primarycare-physicianDC-read-physician` |
| UC-02-refinedURI | [Description-02-refinedURI](./uc-02/uc-02-refinedURI/description-02-refinedURI.md) | [Policy-02-refinedURI](./uc-02/uc-02-refinedURI/policy-02-refinedURI.ttl) | `ex:uc02-refinedURI-p-weight-primarycare-physicianDC-read` | [Request-02-refinedURI](./uc-02/uc-02-refinedURI/request-02-refinedURI.ttl) | `ex:uc02-refinedURI-r-weight-primarycare-physicianDC-read-physician` |
| UC-02-SPARQL | [Description-02-SPARQL](./uc-02/uc-02-SPARQL/description-02-SPARQL.md) | [Policy-02-SPARQL](./uc-02/uc-02-SPARQL/policy-02-SPARQL.ttl) | `ex:uc02-SPARQL-p-weight-primarycare-physicianDC-read` | [Request-02-SPARQL](./uc-02/uc-02-SPARQL/request-02-SPARQL.ttl) | `ex:uc02-SPARQL-r-weight-primarycare-physicianDC-read-physician` |
| UC-02-SHACL | [Description-02-SHACL](./uc-02/uc-02-SHACL/description-02-SHACL.md) | [Policy-02-SHACL](./uc-02/uc-02-SHACL/policy-02-SHACL.ttl) | `ex:uc02-SHACL-p-weight-primarycare-physicianDC-read` | [Request-02-SHACL](./uc-02/uc-02-SHACL/request-02-SHACL.ttl) | `ex:uc02-SHACL-r-weight-primarycare-physicianDC-read-physician` |
| UC-03 | [Description-03](./uc-03/description-03.md) | [Policy-03](./uc-03/policy-03.ttl) | `ex:uc03-p-ehr-monitoring-physicianDC-read` | [Request-03](./uc-03/request-03.ttl) | `ex:uc03-r-ehr-monitoring-physicianDC-read-physician` |
| UC-04-URI | [Description-04-URI](./uc-04/uc-04-URI/description-04-URI.md) | [Policy-04-URI](./uc-04/uc-04-URI/policy-04-URI.ttl) | `ex:uc04-URI-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-04-URI](./uc-04/uc-04-URI/request-04-URI.ttl) | `ex:uc04-URI-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-04-refinedURI | [Description-04-refinedURI](./uc-04/uc-04-refinedURI/description-04-refinedURI.md) | [Policy-04-refinedURI](./uc-04/uc-04-refinedURI/policy-04-refinedURI.ttl) | `ex:uc04-refinedURI-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-04-refinedURI](./uc-04/uc-04-refinedURI/request-04-refinedURI.ttl) | `ex:uc04-refinedURI-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-04-SPARQL | [Description-04-SPARQL](./uc-04/uc-04-SPARQL/description-04-SPARQL.md) | [Policy-04-SPARQL](./uc-04/uc-04-SPARQL/policy-04-SPARQL.ttl) | `ex:uc04-SPARQL-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-04-SPARQL](./uc-04/uc-04-SPARQL/request-04-SPARQL.ttl) | `ex:uc04-SPARQL-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-04-SHACL | [Description-04-SHACL](./uc-04/uc-04-SHACL/description-04-SHACL.md) | [Policy-04-SHACL](./uc-04/uc-04-SHACL/policy-04-SHACL.ttl) | `ex:uc04-SHACL-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-04-SHACL](./uc-04/uc-04-SHACL/request-04-SHACL.ttl) | `ex:uc04-SHACL-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-05-URI | [Description-05-URI](./uc-05/uc-05-URI/description-05-URI.md) | [Policy-05-URI](./uc-05/uc-05-URI/policy-05-URI.ttl) | `ex:uc05-URI-p-labresults-privatesharing-nonHCPDC-read` | [Request-05-URI](./uc-05/uc-05-URI/request-05-URI.ttl) | `ex:uc05-URI-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-05-refinedURI | [Description-05-refinedURI](./uc-05/uc-05-refinedURI/description-05-refinedURI.md) | [Policy-05-refinedURI](./uc-05/uc-05-refinedURI/policy-05-refinedURI.ttl) | `ex:uc05-refinedURI-p-labresults-privatesharing-nonHCPDC-read` | [Request-05-refinedURI](./uc-05/uc-05-refinedURI/request-05-refinedURI.ttl) | `ex:uc05-refinedURI-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-05-SPARQL | [Description-05-SPARQL](./uc-05/uc-05-SPARQL/description-05-SPARQL.md) | [Policy-05-SPARQL](./uc-05/uc-05-SPARQL/policy-05-SPARQL.ttl) | `ex:uc05-SPARQL-p-labresults-privatesharing-nonHCPDC-read` | [Request-05-SPARQL](./uc-05/uc-05-SPARQL/request-05-SPARQL.ttl) | `ex:uc05-SPARQL-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-05-SHACL | [Description-05-SHACL](./uc-05/uc-05-SHACL/description-05-SHACL.md) | [Policy-05-SHACL](./uc-05/uc-05-SHACL/policy-05-SHACL.ttl) | `ex:uc05-SHACL-p-labresults-privatesharing-nonHCPDC-read` | [Request-05-SHACL](./uc-05/uc-05-SHACL/request-05-SHACL.ttl) | `ex:uc05-SHACL-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-06-URI | [Description-06-URI](./uc-06/uc-06-URI/description-06-URI.md) | [Policy-06-URI](./uc-06/uc-06-URI/policy-06-URI.ttl) | `ex:uc06-URI-p-labresults-privatesharing-noDC-read` | [Request-06-URI](./uc-06/uc-06-URI/request-06-URI.ttl) | `ex:uc06-URI-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-06-refinedURI | [Description-06-refinedURI](./uc-06/uc-06-refinedURI/description-06-refinedURI.md) | [Policy-06-refinedURI](./uc-06/uc-06-refinedURI/policy-06-refinedURI.ttl) | `ex:uc06-refinedURI-p-labresults-privatesharing-noDC-read` | [Request-06-refinedURI](./uc-06/uc-06-refinedURI/request-06-refinedURI.ttl) | `ex:uc06-refinedURI-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-06-SPARQL | [Description-06-SPARQL](./uc-06/uc-06-SPARQL/description-06-SPARQL.md) | [Policy-06-SPARQL](./uc-06/uc-06-SPARQL/policy-06-SPARQL.ttl) | `ex:uc06-SPARQL-p-labresults-privatesharing-noDC-read` | [Request-06-SPARQL](./uc-06/uc-06-SPARQL/request-06-SPARQL.ttl) | `ex:uc06-SPARQL-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-06-SHACL | [Description-06-SHACL](./uc-06/uc-06-SHACL/description-06-SHACL.md) | [Policy-06-SHACL](./uc-06/uc-06-SHACL/policy-06-SHACL.ttl) | `ex:uc06-SHACL-p-labresults-privatesharing-noDC-read` | [Request-06-SHACL](./uc-06/uc-06-SHACL/request-06-SHACL.ttl) | `ex:uc06-SHACL-r-labresults-privatesharing-noDC-read-nonHCP` |

## Requirements to be included in the policies

*Note*: not all of them are mandatory.
To assess necessity and information on how to model each of the requirements, check the specification at https://w3id.org/hedge.

### Subject/holder policies

- Data subject
- Data/Personal data
- Processing operation, e.g., read, write, ...
- Purpose
- Pseudo/Anonymisation as a duty
- Recipient
- Duration
- Frequency
- Retrospective/prospective data (maybe also for the requests?)

### Requests

- Data controller
- Data subject (type)
- Data/Personal data
- Personal electronic health data
- Non-personal electronic health data
- Processing operation, e.g., read, write, ...
- Purpose
- Primary/Secondary use
- Legal basis
- Pseudo/Anonymisation as a duty
- Recipient
- Data source
- Duration
- Frequency
- Events/Activities

## Open Issues

### UC-01
[Description-01](./uc-01/description-01.md)

1. Policy (set) and request terminology to approve:
- Policy ex:ucXX-p-<data_cat>-<purpose>-<data_controller>-<scope>	
- Request ex:ucXX-r-<data_cat>-<purpose>-<data_controller>-<scope>-<assignee>

### UC-02
[Description-02](./uc-02/description-02.md)

1. As there are multiple techniques to acces to a subset of data, I have created 4 subsets: know URI [UC-02-URI](./uc-02/uc-02-URI/), refined URI [UC-02-refinedURI](./uc-02/uc-02-refinedURI/), SPARQL query [UC-02-SPARQL](./uc-02/uc-02-SPARQL/) and SHACL validation [UC-02-SHACL](./uc-02/uc-02-SHACL/). The technique is specified in the id as follows:
- Policy ex:ucXX-<tech>-p-<data_cat>-<purpose>-<data_controller>-<scope>	
- Request ex:ucXX-<tech>-r-<data_cat>-<purpose>-<data_controller>-<scope>-<assignee>

The alternative would be to create independent use cases.

2. [Description-02-refinedURI](./uc-02/uc-02-refinedURI/description-02-refinedURI.md): Weight URI refined on source, as it is interpreted as an assetCollection:

    ```odrl:target [
            odrl:source ex:weight ; #rdf:value
            odrl:refinement [
                odrl:leftOperand dpv-odrl:DataControllerDataSource ;
                odrl:operator odrl:eq ;
                odrl:rightOperand ehds:HealthcareProvider ]] ;```

The alternative is to refine rdf:value, but it applies to actions.

3. [Description-02-SHACL](./uc-02/uc-02-refinedURI/description-02-SHACL.md): SHACL validation is applied on the simple policy and request. Should it be a separate file to avoid code repetition by importing and linking it?
Right now it's written on both policy and request. 

### UC-03
[Description-03](./uc-03/description-03.md)

NONE

### UC-04
[Description-04](./uc-04/description-04.md)

1. "From the first encounter until 1 year after surgery": retrospective and limited prospective data. Should the surgery be represented as event or activity?

2. If the physician is only accessing to his own patients' data and he doesn't share them, could it not be anonymised? Is it enough to be pseudonymised?

3. Pseudonymisation approach:
    a. Followed strategy: processing constraint with DeterministicPseudonymisation (same input always produces the same pseudonym) & MonotonicCounterPseudonymisation (Monotonically increasing counter (P1, P2...)).

    ```drl:constraint [
        odrl:leftOperand dpv-odrl:Processing ;
        odrl:operator odrl:isA ;
        odrl:rightOperand dpv:Pseudonymisation ],[
        odrl:leftOperand dpv:hasPseudonymisationTechnique ;
        odrl:operator odrl:isAnyOf ;
        odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ]```

    b. Alternatives:
        1. Data constraint:
        ```odrl:constraint [
            odrl:leftOperand dpv:Data ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]```

        2. Refinement on `ex:weight`
        ```odrl:target [
            odrl:source ex:weight ;
            odrl:refinement [
                odrl:leftOperand dpv:Data ;
                odrl:operator odrl:isAnyOf ;
                odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]] ;```

        3. `odrl:action dpv-odrl:Pseudonymise / dpv-odrl:Anonymise`

        4. `ehds:DataRequest` : Seeks access to statistically anonymised ehd

### UC-05
[Description-05](./uc-05/description-05.md)

1. Personal data: e.g. lab test results of one specific blood sampling. I have done the use case for blood glucose, allowing the mapping to LOINC "Glucose test" concept (LOINC 2345-7).

2. Data subject:
    ex:user05 vs dpv:User

3. Purpose: I would like a purpose like SecondOpinion in sector-health, or a non-official second opinion, like on this use case.

4. Recipient: ex:NonHealthcareProfessional
    I couldn’t find concepts already defined (not similar ones either: Layperson, Unaffiliated individual, Third-party non-provider).
    It's the same as the asignee (data controller) in the Request.
    Why is not the physician the recipient in the previous use cases?

5. Express duration in the descriptions just like '24h'?

6. Not primary nor secondary use, how should we define it?

7. Data source N/A? Shouldn't it also be EHR?

8. SHACL & SPARQL: unit validation to ucum:mg/dL
[Description-05-SHACL](./uc-05/uc-05-SHACL/description-05-SHACL.md)
[Description-05-SPARQL](./uc-05/uc-05-SPARQL/description-05-SPARQL.md)

### UC-06
[Description-06](./uc-06/description-06.md)

1. Personal data: e.g. lab test results of one specific blood sampling. I have done the use case for blood glucose, allowing the mapping to LOINC "Glucose test" concept (LOINC 2345-7).

2. Data subject:
    ex:user05 vs dpv:User

3. Purpose: I would like a purpose like SecondOpinion in sector-health, or a non-official second opinion, like on this use case.

4. Recipient: ex:NonHealthcareProfessional
    I couldn’t find concepts already defined (not similar ones either: Layperson, Unaffiliated individual, Third-party non-provider).
    It's the same as the asignee (but not data controller) in the Request.

5. Express duration in the descriptions just like '24h'?

6. Not primary nor secondary use, how should we define it?

7. Data source N/A? Shouldn't it also be EHR?
