# Use Cases Description and related policies & requests

## Overview of use cases

| Use Case         | Description | Policy | Policy ID | Request | Request ID |
|------------------|-------------|--------|-----------|---------|------------|
| UC-01 | [Description-01](./uc-01/description-01.md) | [Policy-01](./uc-01/policy-01.ttl) | `ex:uc01-p-ehr-primarycare-physicianDC-read` | [Request-01](./uc-01/request-01.ttl) | `ex:uc01-r-ehr-primarycare-physicianDC-read-physician` |
| UC-02 | [Description-02](./uc-02/description-02.md) | [Policy-02](./uc-02/policy-02.ttl) | `ex:uc02-p-weight-primarycare-physicianDC-read` | [Request-02](./uc-02/request-02.ttl) | `ex:uc02-r-weight-primarycare-physicianDC-read-physician` |
| UC-03 | [Description-03](./uc-03/description-03.md) | [Policy-03](./uc-03/policy-03.ttl) | `ex:uc03-p-weight-primarycare-physicianDC-read` | [Request-03](./uc-03/request-03.ttl) | `ex:uc03-r-weight-primarycare-physicianDC-read-physician` |
| UC-04 | [Description-04](./uc-04/description-04.md) | [Policy-04](./uc-04/policy-04.ttl) | `ex:uc04-p-weight-primarycare-physicianDC-read` | [Request-04](./uc-04/request-04.ttl) | `ex:uc04-r-weight-primarycare-physicianDC-read-physician` |
| UC-05 | [Description-05](./uc-05/description-05.md) | [Policy-05](./uc-05/policy-05.ttl) | `ex:uc05-p-weight-primarycare-physicianDC-read` | [Request-05](./uc-05/request-05.ttl) | `ex:uc05-r-weight-primarycare-physicianDC-read-physician` |
| UC-06 | [Description-06](./uc-06/description-06.md) | [Policy-06](./uc-06/policy-06.ttl) | `ex:uc06-p-ehr-monitoring-physicianDC-read` | [Request-06-primaryCare](./uc-06/request-06-primaryCare.ttl) & [Request-06-ptMonitoring](./uc-06/request-06-ptMonitoring.ttl) | `ex:uc06-r-ehr-primarycare-physicianDC-read-physician` & `ex:uc06-r-ehr-monitoring-physicianDC-read-physician` |
| UC-07 | [Description-07](./uc-07/description-07.md) | [Policy-07](./uc-07/policy-07.ttl) | `ex:uc07-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-07](./uc-07/request-07.ttl) | `ex:uc07-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-08 | [Description-08](./uc-08/description-08.md) | [Policy-08](./uc-08/policy-08.ttl) | `ex:uc08-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-08](./uc-08/request-08.ttl) | `ex:uc08-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-09 | [Description-09](./uc-09/description-09.md) | [Policy-09](./uc-09/policy-09.ttl) | `ex:uc09-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-09](./uc-09/request-09.ttl) | `ex:uc09-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-10 | [Description-10](./uc-10/description-10.md) | [Policy-10](./uc-10/policy-10.ttl) | `ex:uc10-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-10](./uc-10/request-10.ttl) | `ex:uc10-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-11 | [Description-11](./uc-11/description-11.md) | [Policy-11](./uc-11/policy-11.ttl) | `ex:uc11-p-pseudonymisedweight-improvehealthcare-physicianDC-read` | [Request-11](./uc-11/request-11.ttl) | `ex:uc11-r-pseudonymisedweight-improvehealthcare-physicianDC-read-physician` |
| UC-12 | [Description-12](./uc-12/description-12.md) | [Policy-12](./uc-12/policy-12.ttl) | `ex:uc12-p-labresults-privatesharing-nonHCPDC-read` | [Request-12](./uc-12/request-12.ttl) | `ex:uc12-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-13 | [Description-13](./uc-13/description-13.md) | [Policy-13](./uc-13/policy-13.ttl) | `ex:uc13-p-labresults-privatesharing-nonHCPDC-read` | [Request-13](./uc-13/request-13.ttl) | `ex:uc13-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-14 | [Description-14](./uc-14/description-14.md) | [Policy-14](./uc-14/policy-14.ttl) | `ex:uc14-p-labresults-privatesharing-nonHCPDC-read` | [Request-14](./uc-14/request-14.ttl) | `ex:uc14-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-15 | [Description-15](./uc-15/description-15.md) | [Policy-15](./uc-15/policy-15.ttl) | `ex:uc15-p-labresults-privatesharing-nonHCPDC-read` | [Request-15](./uc-15/request-15.ttl) | `ex:uc15-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-16 | [Description-16](./uc-16/description-16.md) | [Policy-16](./uc-16/policy-16.ttl) | `ex:uc16-p-labresults-privatesharing-nonHCPDC-read` | [Request-16](./uc-16/request-16.ttl) | `ex:uc16-r-labresults-privatesharing-nonHCPDC-read-nonHCP` |
| UC-17 | [Description-17](./uc-17/description-17.md) | [Policy-17](./uc-17/policy-17.ttl) | `ex:uc17-p-labresults-privatesharing-noDC-read` | [Request-17](./uc-17/request-17.ttl) | `ex:uc17-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-18 | [Description-18](./uc-18/description-18.md) | [Policy-18](./uc-18/policy-18.ttl) | `ex:uc18-p-labresults-privatesharing-noDC-read` | [Request-18](./uc-18/request-18.ttl) | `ex:uc18-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-19 | [Description-19](./uc-19/description-19.md) | [Policy-19](./uc-19/policy-19.ttl) | `ex:uc19-p-labresults-privatesharing-noDC-read` | [Request-19](./uc-19/request-19.ttl) | `ex:uc19-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-20 | [Description-20](./uc-20/description-20.md) | [Policy-20](./uc-20/policy-20.ttl) | `ex:uc20-p-labresults-privatesharing-noDC-read` | [Request-20](./uc-20/request-20.ttl) | `ex:uc20-r-labresults-privatesharing-noDC-read-nonHCP` |
| UC-21 | [Description-21](./uc-21/description-21.md) | [Policy-21](./uc-21/policy-21.ttl) | `ex:uc21-p-labresults-privatesharing-noDC-read` | [Request-21](./uc-21/request-21.ttl) | `ex:uc21-r-labresults-privatesharing-noDC-read-nonHCP` |

## Requirements to be included in the policies

*Note*: not all of them are mandatory.
To assess necessity and information on how to model each of the requirements, check the specification at https://w3id.org/hedge.

### Subject/holder policies

- Data subject
- Data/Personal data
- Processing operation, e.g., read, write, ...
- Purpose
- Pseudo/Anonymisation as a duty
- Recipient
- Duration
- Frequency
- Retrospective/prospective data (maybe also for the requests?)

### Requests

- Data controller
- Data subject (type)
- Data/Personal data
- Personal electronic health data
- Non-personal electronic health data
- Processing operation, e.g., read, write, ...
- Purpose
- Primary/Secondary use
- Legal basis
- Pseudo/Anonymisation as a duty
- Recipient
- Data source
- Duration
- Frequency
- Events/Activities

## Open Issues

### UC-01
[Description-01](./uc-01/description-01.md)

1. Policy (set) and request terminology to approve:
- Policy `ex:ucXX-p-<data_cat>-<purpose>-<data_controller>-<scope>`	
- Request `ex:ucXX-r-<data_cat>-<purpose>-<data_controller>-<scope>-<assignee>`

### UC-05
3. [Description-05](./uc-05/description-05.md): SHACL validation is applied on the simple policy and request. Should it be a separate file to avoid code repetition by importing and linking it?

    Right now it's written on both policy and request. 

    --> Leave as it is and stop working on SHACL. If we use it in the future, yes, separate it into independent files.

### UC-07
[Description-07](./uc-07/description-07.md)

1. "From the first encounter until 1 year after surgery": retrospective and limited prospective data. Should the surgery be represented as event or activity?

2. If the physician is only accessing to his own patients' data and he doesn't share them, could it not be anonymised? Is it enough to be pseudonymised?

3. Pseudonymisation approach:

    a. Followed strategy: processing constraint with DeterministicPseudonymisation (same input always produces the same pseudonym) & MonotonicCounterPseudonymisation (Monotonically increasing counter (P1, P2...)).

    ```
    drl:constraint [
        odrl:leftOperand dpv-odrl:Processing ;
        odrl:operator odrl:isA ;
        odrl:rightOperand dpv:Pseudonymisation ],[
        odrl:leftOperand dpv:hasPseudonymisationTechnique ;
        odrl:operator odrl:isAnyOf ;
        odrl:rightOperand dpv:DeterministicPseudonymisation, dpv:MonotonicCounterPseudonymisation ]
    ```

    b. Alternatives:
            
        # 1. Data constraint:

        ```
        odrl:constraint [
            odrl:leftOperand dpv:Data ;
            odrl:operator odrl:isAnyOf ;
            odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]
        ```

        # 2. Refinement on `ex:weight`
        ```odrl:target [
            odrl:source ex:weight ;
            odrl:refinement [
                odrl:leftOperand dpv:Data ;
                odrl:operator odrl:isAnyOf ;
                odrl:rightOperand dpv:PseudonymisedData, dpv:AnonymisedData ]] ;```

        # 3. 
        `odrl:action dpv-odrl:Pseudonymise / dpv-odrl:Anonymise`

        # 4. 
        `ehds:DataRequest` # Seeks access to statistically anonymised ehd

### UC-12
[Description-12](./uc-12/description-12.md)

1. Data subject:

    `ex:user05` vs `dpv:User`

3. Purpose: I would like a purpose like SecondOpinion in sector-health, or a non-official second opinion, like on this use case.

4. Recipient: `ex:NonHealthcareProfessional`

    I couldn’t find concepts already defined (not similar ones either: Layperson, Unaffiliated individual, Third-party non-provider).
    It's the same as the asignee (data controller) in the Request.
    Why is not the physician the recipient in the previous use cases?

5. Express duration in the descriptions just like '24h'?

6. Not primary nor secondary use, how should we define it?

7. Data source N/A? Shouldn't it also be EHR?

8. SHACL & SPARQL: unit validation to ucum:mg/dL ([Description-15](./uc-15/description-15.md), [Description-14](./uc-14/description-14.md))

### UC-17
[Description-17](./uc-17/description-17.md)

1. Personal data: e.g. lab test results of one specific blood sampling. I have done the use case for blood glucose, allowing the mapping to LOINC "Glucose test" concept (LOINC 2345-7).

2. Data subject:

    `ex:user05` vs `dpv:User`

3. Purpose: I would like a purpose like SecondOpinion in sector-health, or a non-official second opinion, like on this use case.

4. Recipient: `ex:NonHealthcareProfessional`

    I couldn’t find concepts already defined (not similar ones either: Layperson, Unaffiliated individual, Third-party non-provider).
    It's the same as the asignee (data controller) in the Request.
    Why is not the physician the recipient in the previous use cases?
    --> Recipient is a third party that is not DataController

5. Express duration in the descriptions just like '24h'?

6. Not primary nor secondary use, how should we define it?

7. Data source N/A? Shouldn't it also be EHR?

8. SHACL & SPARQL: unit validation to ucum:mg/dL ([Description-20](./uc-20/description-20.md), 
[Description-19](./uc-19/description-19.md)).
