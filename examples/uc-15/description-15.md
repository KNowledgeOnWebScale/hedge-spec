# Use Case Description

Access by non-healthcare professional as data controller to specific subset of data (e.g. lab test results of one specific blood sampling, like a glucose test) for 24h. Using a SHACL query.

For that:
- The user has a [policy](policy-15.ttl) that allows a subset of her health data to be read by a non-healthcare professional for 24h.
- The non-healthcare professional issues a [request](request-15.ttl) to read a subset of health data for 24h with consent as legal basis.

TODO: SOTW & The expected agreement , i.e., generated by matching policy and request, should also be part of this benchmark.

## Use Case Requirements:

- N/A - non applicable requirements
- TODO - we still need to think about how to integrate that into an ODRL policy
- TODO-EHDS - required to assess whether EHDS is applicable, still needs to be incorporated 

### Subject/holder policy

- Data subject: <https://example.org/user15>
- Data/Personal data: <https://example.org/lab-test-results>
- Processing operation: `odrl:read`
- Purpose: `dpv:NonCommercialPurpose` or `dpv:RequestedServiceProvision` or `sector-health:ResourceManagement` or `ex:SecondOpinion`
- Pseudo/Anonymisation as a duty: N/A
- Recipient: <https://example.org/NonHealthcareProfessional>
- Duration: 24h
- Frequency: N/A
- Retrospective/prospective data: Retrospective -- TODO

### Request

- Data controller: <https://example.org/NonHealthcareProfessional>
- Data subject (type): <https://example.org/user15>
- Data/Personal data: <https://example.org/lab-test-results>
- Personal electronic health data: TODO-EHDS
- Non-personal electronic health data: TODO-EHDS
- Processing operation: : `odrl:read`
- Purpose: `dpv:NonCommercialPurpose` or `dpv:RequestedServiceProvision` or `sector-health:ResourceManagement` or `ex:SecondOpinion`
- Primary/Secondary/Household use: Household 
- Legal basis: `eu-gdpr:A9-2-a`
- Pseudo/Anonymisation as a duty: N/A
- Recipient:  N/A # <https://example.org/NonHealthcareProfessional> as DC
- Data source: N/A #Could be the patient or could be the EHR
- Duration: 24h
- Frequency: N/A
- Events/Activities: N/A

## Issues
### Open Issues
1. Purpose: I would like a purpose like SecondOpinion in sector-health, or a non-official second opinion, like on this use case.

2. Recipient: `ex:NonHealthcareProfessional`

    I couldnâ€™t find concepts already defined (not similar ones either: Layperson, Unaffiliated individual, Third-party non-provider).

    Should it also be stated in the request? As a constraint or as a permission?

    **Recipient vs DataController**: 
    - UC-12 to UC-16: nonHCP as Data Controller:
        - Policy:
            - Recipient: <https://example.org/NonHealthcareProfessional> 
            
            Always even if nonHCP as DC?

        - Request:
            - Recipient: NOT STATED. -> Recipient is a third party that is not DataController
            - DataController: <https://example.org/NonHealthcareProfessional>

3. Data source N/A? Shouldn't it also be EHR?

    Could be the patient or could be the EHR

4. How does the engine know that it means P24H after the event?

### Closed Issues
1. Personal data: e.g. lab test results of one specific blood sampling. I have done the use case for blood glucose, allowing the mapping to LOINC "Glucose test" concept (LOINC 2345-7).

2. Recipient: `ex:NonHealthcareProfessional`

    It's the same as the asignee (data controller) in the Request.
    
    Why is not the physician the recipient in the previous use cases?
    
    --> Recipient is a third party that is not DataController

3. **SHACL validation**: applied on the simple policy and request. Should it be a separate file to avoid code repetition by importing and linking it?

    Right now it's written on both policy and request. -> It should only be in policy. Request should be blind to validation.

    --> Leave as it is and stop working on SHACL. If we use it in the future, yes, separate it into independent files.

4. Data subject: `ex:user05` vs `dpv:User`

"Access by non-healthcare professional as data controller to specific subset of data (e.g. lab test results of one specific blood sampling, like a glucose test) for 24h."

The assigner and DataSubject is a specific user, so `ex:userXX` will be used:
```
        odrl:assigner ex:user12 ;
        dpv:DataSubject ex:user12 ;
```

However, when defining a SHACL shape, it refers to user data as a generic category, so `dpv:User` will be used:
```
        ex:LabTestResultsShape a sh:NodeShape ;
        sh:targetClass dpv:User ; # Applies to user data
```

5. Express 24h access duration as constraint:

    Current approach: `"P24H"^^xsd:duration`

    ```
    [ 
        odrl:leftOperand odrl:elapsedTime ;
        odrl:operator odrl:lteq ;  
        odrl:rightOperand "P24H"^^xsd:duration 
    ]
    ```

    Original approach: 
    ```
    [
        odrl:leftOperand odrl:elapsedTime ;
        odrl:operator odrl:lteq ;  
        odrl:rightOperand [
            a time:Duration ;
            time:unitType time:unitHour ;
            time:numericDuration 24 ] 
    ]
    ```

6. Unit validation to ucum:mg/dL

7. Not primary nor secondary use, how should we define it?

    _@JelleCousyns (AContrario Law) comment:_

        In my view, this is an edge case.
        
        **Primary use** refers to using the data directly for the provision of healthcare. Here, we are talking about sharing data that was already collected for other purposes, so it does not constitute primary use. 
        
        **Secondary use** then refers to using the data for a purpose beyond the original medical / clinical purpose (e.g., research, analytics, quality improvement, etc). Traditionally, from a legal point of view, secondary use is initiated by a legal person or organization (e.g. research institute) and not by the patient itself (however, the patient may need to be informed and may need to provide a consent). The legal requirements on secondary use are tailored to these kinds of scenarios (e.g., transparency to data subject; pseudonymization or anonymization; requesting a data permit; etc.). 
        
        Here, we are talking about a use case where the patient / individual is sharing the data under their own control, with another natural person (non-HCP). I interpret this to be a personal use case, falling outside the scope of the legal taxonomy of primary or secondary use. Both GDPR and the EHDS have exemptions for **household use** / purely **personal use**. 
